import{r as l,V as h,h as w,j as r}from"./three-DoDmUXEH.js";import{G as y}from"./ground-geiEh1YG.js";import{c as P}from"./index-DTAMNN3q.js";const b=({motionMapper:x,maxPoints:i=1e3,pointSize:g=.2,maxDim:a=2,color:j="white"})=>{const s=Math.max(1,Math.floor(Math.cbrt(i))),d=Math.pow(s,3),o=l.useRef(null),u=l.useMemo(()=>new h,[]),c=l.useMemo(()=>new h,[]);return l.useEffect(()=>{if(!o.current)return;const f=o.current.geometry.attributes.position,n=a/s;let p=0;for(let e=0;e<s;e++)for(let t=0;t<s;t++)for(let m=0;m<s;m++)p=e*(s*s)+t*s+m,f.setXYZ(p,-a/2+e*n,-a/2+t*n,-a/2+m*n);f.needsUpdate=!0}),w(({clock:f},n)=>{if(!o.current)return;const p=f.getElapsedTime(),e=o.current.geometry.attributes.position;for(let t=0;t<d;t++)u.x=e.getX(t),u.y=e.getY(t),u.z=e.getZ(t),x.map(u,n,p,c),e.setXYZ(t,c.x,c.y,c.z);e.needsUpdate=!0}),r.jsxs("points",{ref:o,children:[r.jsx("bufferGeometry",{children:r.jsx("bufferAttribute",{attach:"attributes-position",array:new Float32Array(d*3),count:d,itemSize:3})}),r.jsx("pointsMaterial",{attach:"material",color:j,size:g})]})},{useParams:M,useActions:B,usePresets:E}=P({default:{maxPoints:1e3,pointSize:.2,maxDim:2,color:"white"}}),V=({motionMapper:x})=>{const i=M();return r.jsxs(r.Fragment,{children:[r.jsx(b,{motionMapper:x,...i}),r.jsx(y,{position:new h(0,0,-1.5*i.maxDim)})]})};export{V as default,B as useActions,M as useParams,E as usePresets};
