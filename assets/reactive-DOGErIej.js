import{r as m,m as w,h as C,j as t,B as E,n as R,V as T}from"./three-DoDmUXEH.js";import{G as A}from"./ground-geiEh1YG.js";import{u as B,C as I,b as y,T as x,c as G}from"./index-DTAMNN3q.js";const O=({coordinateMapper:c,radius:r=2,nPoints:s=800,cubeSideLength:l=.05})=>{const j=B(),e=m.useRef(null),P=m.useMemo(()=>new w,[]),M=I.getPalette(j).buildLut();return m.useEffect(()=>{if(e.current){for(let a=0;a<s;a++)e.current.setColorAt(a,M.getColor(a/s));e.current.instanceColor.needsUpdate=!0}},[M,e,s]),C(({clock:a})=>{if(!e.current)return;const g=a.getElapsedTime();let h,o,i,f,p,d,n;for(let u=0;u<s;u++)h=u+.5,o=Math.acos(1-2*h/s)%Math.PI,i=Math.PI*(1+Math.sqrt(5))*h%x,f=Math.cos(i)*Math.sin(o),p=Math.sin(i)*Math.sin(o),d=Math.cos(o),n=r+.25*r*c.map(y.POLAR,i/x,o/Math.PI,0,g),e.current.setMatrixAt(u,P.setPosition(f*n,p*n,d*n));e.current.instanceMatrix.needsUpdate=!0}),t.jsxs("instancedMesh",{ref:e,castShadow:!0,receiveShadow:!0,args:[new E,new R,s],children:[t.jsx("boxGeometry",{attach:"geometry",args:[l,l,l,1]}),t.jsx("meshBasicMaterial",{attach:"material",color:"white",toneMapped:!1})]})},{useParams:S,useActions:U,usePresets:V}=G({default:{radius:2,nPoints:800,cubeSideLength:.05}}),_=({coordinateMapper:c})=>{const r=S();return t.jsxs(t.Fragment,{children:[t.jsx(O,{coordinateMapper:c,...r}),t.jsx(A,{position:new T(0,0,-r.radius*(1+.25*c.amplitude))})]})};export{_ as default,U as useActions,S as useParams,V as usePresets};
