import{r as x,m as S,h as w,j as o,B as A,n as T,V as B}from"./three-DoDmUXEH.js";import{G as I}from"./ground-geiEh1YG.js";import{u as Y,C as b,b as z,c as C}from"./index-DTAMNN3q.js";const O=({coordinateMapper:i,nGridRows:e=100,nGridCols:t=100,cubeSideLength:n=.025,cubeSpacingScalar:h=5})=>{const s=x.useRef(null),M=x.useMemo(()=>new S,[]),E=Y(),g=b.getPalette(E).buildLut();return x.useEffect(()=>{if(!g||!s.current)return;const d=Math.hypot(.5,.5);let u,l,m,c;for(let r=0;r<e;r++)for(let a=0;a<t;a++)u=r*t+a,l=r/(e-1),m=a/(t-1),c=Math.hypot(l-.5,m-.5)/d,s.current.setColorAt(u,g.getColor(c));s.current.instanceColor.needsUpdate=!0}),w(({clock:d})=>{if(!s.current)return;const u=d.getElapsedTime(),l=e*h*n,m=t*h*n;let c,r,a,j,P,y;for(let f=0;f<e;f++)for(let p=0;p<t;p++)c=f*t+p,r=f/(e-1),a=p/(t-1),y=i.map(z.CARTESIAN_2D,r,a,0,u),j=l*(r-.5),P=m*(a-.5),M.setPosition(j,P,y),s.current.setMatrixAt(c,M);s.current.instanceMatrix.needsUpdate=!0}),o.jsxs("instancedMesh",{ref:s,castShadow:!0,receiveShadow:!0,args:[new A,new T,e*t],children:[o.jsx("boxGeometry",{attach:"geometry",args:[n,n,n,1]}),o.jsx("meshPhongMaterial",{attach:"material",color:"white",toneMapped:!1})]})},{useParams:R,useActions:F,usePresets:G}=C({default:{nGridCols:100,nGridRows:100,cubeSideLength:.025,cubeSpacingScalar:5},bands:{nGridRows:5,nGridCols:200,cubeSideLength:.025,cubeSpacingScalar:1}}),N=({coordinateMapper:i})=>{const e=R();return o.jsxs(o.Fragment,{children:[o.jsx(O,{coordinateMapper:i,...e}),o.jsx(I,{position:new B(0,0,-2.5*i.amplitude)})]})};export{N as default,F as useActions,R as useParams,G as usePresets};
