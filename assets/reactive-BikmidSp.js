import{r as M,m as I,h as _,j as u,B,n as G,V as N}from"./three-DoDmUXEH.js";import{G as U}from"./ground-geiEh1YG.js";import{u as F,C as O,H as b,b as w,c as v}from"./index-DTAMNN3q.js";const z=({coordinateMapper:A,nPerSide:e=10,cubeSideLength:i=.5,cubeSpacingScalar:j=.1,volume:y=!0})=>{const c=M.useRef(null),m=M.useMemo(()=>new I,[]),R=y?w.CARTESIAN_3D:w.CARTESIAN_CUBE_FACES,T=F(),d=O.getPalette(T).buildLut();return M.useEffect(()=>{if(!c.current)return;let f,n,t,a,s;for(let o=0;o<e;o++)for(let r=0;r<e;r++)for(let l=0;l<e;l++)f=o*e**2+r*e+l,n=o/(e-1),t=r/(e-1),a=l/(e-1),n==0||n==1?s=Math.hypot(t-.5,a-.5)/b:t==0||t==1?s=Math.hypot(n-.5,a-.5)/b:a==0||a==1?s=Math.hypot(n-.5,t-.5)/b:s=0,c.current.setColorAt(f,d.getColor(s));c.current.instanceColor.needsUpdate=!0}),_(({clock:f})=>{if(!c.current)return;const n=f.getElapsedTime(),t=e*(1+j)*i;let a,s,o,r,l,E,g,p;for(let h=0;h<e;h++)for(let x=0;x<e;x++)for(let C=0;C<e;C++)a=h*e**2+x*e+C,s=h/(e-1),o=x/(e-1),r=C/(e-1),l=t*(s-.5),E=t*(o-.5),g=t*(r-.5),m.setPosition(l,E,g),p=.1+.9*A.map(R,s,o,r,n),m.elements[0]=p,m.elements[5]=p,m.elements[10]=p,c.current.setMatrixAt(a,m);c.current.instanceMatrix.needsUpdate=!0}),u.jsxs("instancedMesh",{ref:c,castShadow:!0,receiveShadow:!0,args:[new B,new G,e**3],children:[u.jsx("boxGeometry",{attach:"geometry",args:[i,i,i,1]}),u.jsx("meshBasicMaterial",{attach:"material",color:"white",toneMapped:!1})]})},{useParams:D,useActions:V,usePresets:X}=v({default:{nPerSide:10,cubeSideLength:.5,cubeSpacingScalar:.1,volume:!0}}),Z=({coordinateMapper:A})=>{const e=D();return u.jsxs(u.Fragment,{children:[u.jsx(z,{coordinateMapper:A,...e}),u.jsx(U,{position:new N(0,0,-.75*e.nPerSide*(1+e.cubeSpacingScalar)*e.cubeSideLength)})]})};export{Z as default,V as useActions,D as useParams,X as usePresets};
